---
import { pick, safeParse } from "valibot";

import RegisterOrgPapercutAuthToken from "~/components/register-org/papercut-auth-token.astro";
import { registrationSchema } from "~/lib/schemas";

export const partial = true;

const formData = await Astro.request.formData();
const result = safeParse(
  pick(registrationSchema, ["authToken"]),
  Object.fromEntries(formData.entries()),
);

const value = result.success ? result.output.authToken : "";
---

<RegisterOrgPapercutAuthToken {value} show />
